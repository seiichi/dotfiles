source ~/Dropbox/DotFiles/muttrc

set editor = 'vim'

# Don't let your firewall kill your idle connection.
set imap_keepalive	= 900

# Do not copy sent mail.  Gmail smtp already does this.
set copy		= no

# Don't move read mail.
set move = no

# Automatically poll subscribed mailboxes for new mail
set imap_check_subscribed = yes

# How often mutt should look for new mail.
set mail_check		= 60

# Poll the current mailbox more often
set timeout		= 10

# This should be ' »›-‹L' to match Gmail, but $to_chars breaks on unicode.
# https://gist.github.com/kaleb/1289741
set to_chars		= ' +>-<L'

# Sort by newest conversation first.
set sort		= threads
set sort_aux		= last-date-received

# use ASCII characters when displaying thread, instead of ACS
set ascii_chars		= yes

# Folder
set folder		= imaps://imap.gmail.com:993
set spoolfile		= +INBOX #or +[Gmail]/Important
set postponed		= +[Gmail]/Drafts
set record		= "+[GMail]/Sent Mail"
set trash		= +[Gmail]/Trash # This is using the 'trash' patch.

# Cache
set header_cache	= ~/.mutt/cache/headers
set message_cachedir	= ~/.mutt/cache/bodies
set certificate_file	= ~/.mutt/certificates

# Encoding
set charset		= "utf-8"
set send_charset	= "us-ascii:iso-2022-jp"
set assumed_charset	= "iso-2022-jp:euc-jp:shift_jis:utf-8"

# solarized colors
source '~/.mutt/apply-solarized-colors.sh|'

# mailcap
source '~/.mutt/mailcap.sh|'
auto_view text/html

# urlview
macro index \cb |urlview\n
macro pager  \cb |urlview\n

# keybindings
bind  editor <space> noop
#bind  index,pager c  mail 		#Compose
#bind  generic     x  tag-entry		#Select Conversation
#bind  index       x  tag-thread		#Select Conversation
#bind  pager       x  tag-message	#Select Conversation
##bind  index,pager s  flag-message	#Star a message
#macro index,pager +  <save-message>=[Gmail]/Important<enter><enter> "Mark as important"
#macro index,pager !  <save-message>=[Gmail]/Spam<enter><enter> "Report spam"
#bind  index,pager a  group-reply	#Reply all
#bind  index,pager \# delete-thread	#Delete
#bind  index,pager l  copy-message	#Label
#bind  index,pager v  save-message	#Move to
#macro index,pager I  <set-flag>O	"Mark as read"
#macro index,pager U  <clear-flag>O	"Mark as unread"
macro index,pager A  "<save-message>=[Gmail]/All Mail<enter><enter>" "Archive conversation"
macro index,pager ga "<change-folder>=[Gmail]/All Mail<enter>"	"Go to all mail"
macro index,pager gs <change-folder>=[Gmail]/Starred<enter>	"Go to 'Starred'"
macro index,pager gd <change-folder>=[Gmail]/Drafts<enter>	"Go to 'Drafts'"
macro index,pager gl <change-folder>?				"Go to 'Label'"
macro index,pager gi <change-folder>=INBOX<enter> 		"Go to inbox"
macro index,pager gt "<change-folder>=[Gmail]/Sent Mail<enter>"	"Go to 'Sent Mail'"
folder-hook +INBOX 'macro index,pager y "<save-message>=[Gmail]/All Mail<enter><enter>" "Archive conversation"'
folder-hook +[Gmail]/Trash macro index,pager y <save-message>=INBOX<enter><enter> "Move to inbox"
#folder-hook +[Gmail]/Starred bind  index,pager y flag-message #"Toggle star"

# goobook
set query_command="goobook query '%s'"
bind editor <Tab> complete-query
macro index,pager a "<pipe-message>goobook add<return>" "add the sender address to Google contacts"
